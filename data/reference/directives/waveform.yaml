directive:
  name: waveform
  desc: |
    波形を定義します。

    波形データは音声ファイルから読み込むほか、直接記述することもできます。

  params:
    -
      name: |
        `name`
      type: QuotedIdentifier
      required: true
      desc: |
        波形を割り当てる変数の名前を指定します。

    -
      name: |
        `spec`
      type: Assoc | String
      required: true
      desc: |
        連想配列で波形を記述します。

        読み込む音声ファイルのパスだけを文字列で指定することもできます。


  details:
    - |
      `spec` を連想配列で記述する場合、次のような内容にします：

    -
      table:
        head:
          - キー
          - 値
        body:
          -
            - "`data`"
            - |
              波形データを配列で記述します。

              `data` と `path` のどちらか一方だけを必ず記述しなければなりません。
          -
            - "`path`"
            - |
              読み込む音声ファイルのパスを指定します。

              `data` と `path` のどちらか一方だけを必ず記述しなければなりません。
          -
            - "`sampleRate`"
            - |
              サンプルレート [Hz] を指定します。

              `data` を記述する場合は必須です。

              `path` を記述する場合は省略でき、省略した場合は音声ファイルのサンプルレートが使われます。
          -
            - "`originalFreq`"
            - |
              波形を本来の速度で再生した場合に鳴る音の周波数 [Hz] を指定します。

              省略した場合、`o4c` の周波数と見なされます。
          -
            - "`startOffset`"
            - |
              波形の再生を開始する位置 [サンプル] を指定します。

              省略した場合、`0` と見なされます。
          -
            - "`endOffset`"
            - |
              波形の再生を終了する位置 [サンプル] を指定します。

              省略した場合、波形の終点と見なされます。
          -
            - "`loopOffset`"
            - |
              波形をループ再生する場合、再生位置が `endOffset` に達した後に戻る位置 [サンプル] を指定します。

              省略した場合、ループ再生しません。

    - |
      `spec` でファイルパスだけを文字列で指定する場合、連想配列で `path` だけを指定するのと同じ結果になります。

    # - sample:
    #     code: |
    #       @waveform 

    #       @solo ^abc

    #     desc:
    #       トラック `a`, `b`, `c` だけが演奏されます。



