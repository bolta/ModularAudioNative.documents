article:
  title: ModDL の実行フェーズ
  content:
    - |
      ModDL を実行する過程は、以下の 3 つのフェーズに分かれています。

      `moddl` コマンドを moddl ファイルを指定して実行すると、3 つのフェーズが続けて実行されます。

      ## 定義フェーズ

      **定義フェーズ**では、ModDL ソースファイルが解析され、ソースファイルに含まれるモジュール定義と シーケンスの定義（すなわち MML）が収集されます。

      構築文からは各トラックのモジュール定義が抽出されます。この過程で構築文に含まれる式が評価されます。

      MML 文からは MML の内容がトラックごとに収集されます。

      ## 構築フェーズ

      **構築フェーズ**では、定義フェーズで収集された情報を元に、演奏のための構造が構築されます。

      各トラックのモジュール定義に基づき、ノードが生成され、接続されてモジュールになります。

      MML はコンパイルされ、各トラックのシーケンスが生成されます。

      ## 演奏フェーズ

      **演奏フェーズ**では、構築されたモジュールが動作します。シーケンスは各トラックのシーケンサによって実行され、その際発行されるイベントによってモジュールが操作されます。

      結果的に音楽が演奏され、スピーカーから音が出たり、音声ファイルが生成されたりします。
